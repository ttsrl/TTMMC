(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n(require("jquery")):n(jQuery)})(function(n){"use strict";function g(t,i){var l=n('<div class="minicolors" />'),b=n.minicolors.defaults,v,y,p,s,w,c,h;if(!t.data("minicolors-initialized")){if(i=n.extend(!0,{},b,i),l.addClass("minicolors-theme-"+i.theme).toggleClass("minicolors-with-opacity",i.opacity),i.position!==undefined&&n.each(i.position.split(" "),function(){l.addClass("minicolors-position-"+this)}),y=i.format==="rgb"?i.opacity?"25":"20":i.keywords?"11":"7",t.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",i).prop("size",y).wrap(l).after('<div class="minicolors-panel minicolors-slider-'+i.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"><\/div><\/div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"><\/div><\/div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"><\/div><div class="minicolors-picker"><div><\/div><\/div><\/div><\/div>'),!i.inline){t.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"><\/span><\/span>');t.next(".minicolors-input-swatch").on("click",function(n){n.preventDefault();t.focus()})}if(c=t.parent().find(".minicolors-panel"),c.on("selectstart",function(){return!1}).end(),i.swatches&&i.swatches.length!==0)for(c.addClass("minicolors-with-swatches"),p=n('<ul class="minicolors-swatches"><\/ul>').appendTo(c),h=0;h<i.swatches.length;++h)n.type(i.swatches[h])==="object"?(v=i.swatches[h].name,s=i.swatches[h].color):(v="",s=i.swatches[h]),w=s,s=u(s)?r(s,!0):e(f(s,!0)),n('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color" title="'+v+'"><\/span><\/li>').appendTo(p).data("swatch-color",w).find(".minicolors-swatch-color").css({backgroundColor:a(s),opacity:s.a}),i.swatches[h]=s;i.inline&&t.parent().addClass("minicolors-inline");o(t,!1);t.data("minicolors-initialized",!0)}}function v(n){var t=n.parent();n.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");t.before(n).remove()}function c(n){var i=n.parent(),r=i.find(".minicolors-panel"),t=n.data("minicolors-settings");!n.data("minicolors-initialized")||n.prop("disabled")||i.hasClass("minicolors-inline")||i.hasClass("minicolors-focus")||(s(),i.addClass("minicolors-focus"),r.animate?r.stop(!0,!0).fadeIn(t.showSpeed,function(){t.show&&t.show.call(n.get(0))}):(r.show(),t.show&&t.show.call(n.get(0))))}function s(){n(".minicolors-focus").each(function(){var i=n(this),r=i.find(".minicolors-input"),u=i.find(".minicolors-panel"),t=r.data("minicolors-settings");u.animate?u.fadeOut(t.hideSpeed,function(){t.hide&&t.hide.call(r.get(0));i.removeClass("minicolors-focus")}):(u.hide(),t.hide&&t.hide.call(r.get(0)),i.removeClass("minicolors-focus"))})}function y(n,t,i){var c=n.parents(".minicolors").find(".minicolors-input"),a=c.data("minicolors-settings"),e=n.find("[class$=-picker]"),v=n.offset().left,y=n.offset().top,r=Math.round(t.pageX-v),u=Math.round(t.pageY-y),w=i?a.animationSpeed:0,o,s,l,f,h;t.originalEvent.changedTouches&&(r=t.originalEvent.changedTouches[0].pageX-v,u=t.originalEvent.changedTouches[0].pageY-y);r<0&&(r=0);u<0&&(u=0);r>n.width()&&(r=n.width());u>n.height()&&(u=n.height());n.parent().is(".minicolors-slider-wheel")&&e.parent().is(".minicolors-grid")&&(o=75-r,s=75-u,l=Math.sqrt(o*o+s*s),f=Math.atan2(s,o),f<0&&(f+=Math.PI*2),l>75&&(l=75,r=75-75*Math.cos(f),u=75-75*Math.sin(f)),r=Math.round(r),u=Math.round(u));h={top:u+"px"};n.is(".minicolors-grid")&&(h.left=r+"px");e.animate?e.stop(!0).animate(h,w,a.animationEasing,function(){p(c,n)}):(e.css(h),p(c,n))}function p(n,r){function g(n,t){var i,r;return!n.length||!t?null:(i=n.offset().left,r=n.offset().top,{x:i-t.offset().left+n.outerWidth()/2,y:r-t.offset().top+n.outerHeight()/2})}var u,f,o,y,p,b,a,c=n.val(),k=n.attr("data-opacity"),v=n.parent(),tt=n.data("minicolors-settings"),it=v.find(".minicolors-input-swatch"),e=v.find(".minicolors-grid"),h=v.find(".minicolors-slider"),nt=v.find(".minicolors-opacity-slider"),rt=e.find("[class$=-picker]"),ut=h.find("[class$=-picker]"),ft=nt.find("[class$=-picker]"),s=g(rt,e),d=g(ut,h),et=g(ft,nt);if(r.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(tt.control){case"wheel":y=e.width()/2-s.x;p=e.height()/2-s.y;b=Math.sqrt(y*y+p*p);a=Math.atan2(p,y);a<0&&(a+=Math.PI*2);b>75&&(b=75,s.x=69-75*Math.cos(a),s.y=69-75*Math.sin(a));f=t(b/.75,0,100);u=t(a*180/Math.PI,0,360);o=t(100-Math.floor(d.y*(100/h.height())),0,100);c=i({h:u,s:f,b:o});h.css("backgroundColor",i({h:u,s:f,b:100}));break;case"saturation":u=t(parseInt(s.x*(360/e.width()),10),0,360);f=t(100-Math.floor(d.y*(100/h.height())),0,100);o=t(100-Math.floor(s.y*(100/e.height())),0,100);c=i({h:u,s:f,b:o});h.css("backgroundColor",i({h:u,s:100,b:o}));v.find(".minicolors-grid-inner").css("opacity",f/100);break;case"brightness":u=t(parseInt(s.x*(360/e.width()),10),0,360);f=t(100-Math.floor(s.y*(100/e.height())),0,100);o=t(100-Math.floor(d.y*(100/h.height())),0,100);c=i({h:u,s:f,b:o});h.css("backgroundColor",i({h:u,s:f,b:100}));v.find(".minicolors-grid-inner").css("opacity",1-o/100);break;default:u=t(360-parseInt(d.y*(360/h.height()),10),0,360);f=t(Math.floor(s.x*(100/e.width())),0,100);o=t(100-Math.floor(s.y*(100/e.height())),0,100);c=i({h:u,s:f,b:o});e.css("backgroundColor",i({h:u,s:100,b:100}))}k=tt.opacity?parseFloat(1-et.y/nt.height()).toFixed(2):1;w(n,c,k)}else it.find("span").css({backgroundColor:c,opacity:k}),l(n,c,k)}function w(n,i,o){var s,a=n.parent(),c=n.data("minicolors-settings"),v=a.find(".minicolors-input-swatch");c.opacity&&n.attr("data-opacity",o);c.format==="rgb"?(s=u(i)?r(i,!0):e(f(i,!0)),o=n.attr("data-opacity")===""?1:t(parseFloat(n.attr("data-opacity")).toFixed(2),0,1),(isNaN(o)||!c.opacity)&&(o=1),i=n.minicolors("rgbObject").a<=1&&s&&c.opacity?"rgba("+s.r+", "+s.g+", "+s.b+", "+parseFloat(o)+")":"rgb("+s.r+", "+s.g+", "+s.b+")"):(u(i)&&(i=d(i)),i=h(i,c.letterCase));n.val(i);v.find("span").css({backgroundColor:i,opacity:o});l(n,i,o)}function o(e,o){var y,s,w,ct,ft,et,p,c,ot,st,nt=e.parent(),g=e.data("minicolors-settings"),ht=nt.find(".minicolors-input-swatch"),a=nt.find(".minicolors-grid"),v=nt.find(".minicolors-slider"),tt=nt.find(".minicolors-opacity-slider"),it=a.find("[class$=-picker]"),ut=v.find("[class$=-picker]"),lt=tt.find("[class$=-picker]");u(e.val())?(y=d(e.val()),ft=t(parseFloat(k(e.val())).toFixed(2),0,1),ft&&e.attr("data-opacity",ft)):y=h(f(e.val(),!0),g.letterCase);y||(y=h(b(g.defaultValue,!0),g.letterCase));s=rt(y);ct=g.keywords?n.map(g.keywords.split(","),function(t){return n.trim(t.toLowerCase())}):[];et=e.val()!==""&&n.inArray(e.val().toLowerCase(),ct)>-1?h(e.val()):u(e.val())?r(e.val()):y;o||e.val(et);g.opacity&&(w=e.attr("data-opacity")===""?1:t(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),isNaN(w)&&(w=1),e.attr("data-opacity",w),ht.find("span").css("opacity",w),c=t(tt.height()-tt.height()*w,0,tt.height()),lt.css("top",c+"px"));e.val().toLowerCase()==="transparent"&&ht.find("span").css("opacity",0);ht.find("span").css("backgroundColor",y);switch(g.control){case"wheel":ot=t(Math.ceil(s.s*.75),0,a.height()/2);st=s.h*Math.PI/180;p=t(75-Math.cos(st)*ot,0,a.width());c=t(75-Math.sin(st)*ot,0,a.height());it.css({top:c+"px",left:p+"px"});c=150-s.b/(100/a.height());y===""&&(c=0);ut.css("top",c+"px");v.css("backgroundColor",i({h:s.h,s:s.s,b:100}));break;case"saturation":p=t(5*s.h/12,0,150);c=t(a.height()-Math.ceil(s.b/(100/a.height())),0,a.height());it.css({top:c+"px",left:p+"px"});c=t(v.height()-s.s*(v.height()/100),0,v.height());ut.css("top",c+"px");v.css("backgroundColor",i({h:s.h,s:100,b:s.b}));nt.find(".minicolors-grid-inner").css("opacity",s.s/100);break;case"brightness":p=t(5*s.h/12,0,150);c=t(a.height()-Math.ceil(s.s/(100/a.height())),0,a.height());it.css({top:c+"px",left:p+"px"});c=t(v.height()-s.b*(v.height()/100),0,v.height());ut.css("top",c+"px");v.css("backgroundColor",i({h:s.h,s:s.s,b:100}));nt.find(".minicolors-grid-inner").css("opacity",1-s.b/100);break;default:p=t(Math.ceil(s.s/(100/a.width())),0,a.width());c=t(a.height()-Math.ceil(s.b/(100/a.height())),0,a.height());it.css({top:c+"px",left:p+"px"});c=t(v.height()-s.h/(360/v.height()),0,v.height());ut.css("top",c+"px");a.css("backgroundColor",i({h:s.h,s:100,b:100}))}e.data("minicolors-initialized")&&l(e,et,w)}function l(n,t,i){var f=n.data("minicolors-settings"),h=n.data("minicolors-lastChange"),s,c,o;if(!h||h.value!==t||h.opacity!==i){if(n.data("minicolors-lastChange",{value:t,opacity:i}),f.swatches&&f.swatches.length!==0){for(s=u(t)?r(t,!0):e(t),c=-1,o=0;o<f.swatches.length;++o)if(s.r===f.swatches[o].r&&s.g===f.swatches[o].g&&s.b===f.swatches[o].b&&s.a===f.swatches[o].a){c=o;break}n.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected");c!==-1&&n.parent().find(".minicolors-swatches .minicolors-swatch").eq(o).addClass("selected")}f.change&&(f.changeDelay?(clearTimeout(n.data("minicolors-changeTimeout")),n.data("minicolors-changeTimeout",setTimeout(function(){f.change.call(n.get(0),t,i)},f.changeDelay))):f.change.call(n.get(0),t,i));n.trigger("change").trigger("input")}}function nt(t){var i,o=n(t).attr("data-opacity"),s;return(u(n(t).val())?i=r(n(t).val(),!0):(s=f(n(t).val(),!0),i=e(s)),!i)?null:(o!==undefined&&n.extend(i,{a:parseFloat(o)}),i)}function tt(t,i){var o,s=n(t).attr("data-opacity"),h;return(u(n(t).val())?o=r(n(t).val(),!0):(h=f(n(t).val(),!0),o=e(h)),!o)?null:(s===undefined&&(s=1),i?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(s)+")":"rgb("+o.r+", "+o.g+", "+o.b+")")}function h(n,t){return t==="uppercase"?n.toUpperCase():n.toLowerCase()}function f(n,t){return(n=n.replace(/^#/g,""),!n.match(/^[A-F0-9]{3,6}/ig))?"":n.length!==3&&n.length!==6?"":(n.length===3&&t&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),"#"+n)}function r(n,i){var u=n.replace(/[^\d,.]/g,""),r=u.split(",");return(r[0]=t(parseInt(r[0],10),0,255),r[1]=t(parseInt(r[1],10),0,255),r[2]=t(parseInt(r[2],10),0,255),r[3]!==undefined&&(r[3]=t(parseFloat(r[3],10),0,1)),i)?r[3]!==undefined?{r:r[0],g:r[1],b:r[2],a:r[3]}:{r:r[0],g:r[1],b:r[2]}:typeof r[3]!="undefined"&&r[3]<=1?"rgba("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")":"rgb("+r[0]+", "+r[1]+", "+r[2]+")"}function b(n,t){return u(n)?r(n):f(n,t)}function t(n,t,i){return n<t&&(n=t),n>i&&(n=i),n}function u(n){var t=n.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return t&&t.length===4?!0:!1}function k(n){return n=n.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i),n&&n.length===6?n[4]:"1"}function it(n){var t={},u=Math.round(n.h),o=Math.round(n.s*255/100),e=Math.round(n.b*255/100);if(o===0)t.r=t.g=t.b=e;else{var i=e,r=(255-o)*e/255,f=(i-r)*(u%60)/60;u===360&&(u=0);u<60?(t.r=i,t.b=r,t.g=r+f):u<120?(t.g=i,t.b=r,t.r=i-f):u<180?(t.g=i,t.r=r,t.b=r+f):u<240?(t.b=i,t.r=r,t.g=i-f):u<300?(t.b=i,t.g=r,t.r=r+f):u<360?(t.r=i,t.g=r,t.b=i-f):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}function d(n){return n=n.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),n&&n.length===4?"#"+("0"+parseInt(n[1],10).toString(16)).slice(-2)+("0"+parseInt(n[2],10).toString(16)).slice(-2)+("0"+parseInt(n[3],10).toString(16)).slice(-2):""}function a(t){var i=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return n.each(i,function(n,t){t.length===1&&(i[n]="0"+t)}),"#"+i.join("")}function i(n){return a(it(n))}function rt(n){var t=ut(e(n));return t.s===0&&(t.h=360),t}function ut(n){var t={h:0,s:0,b:0},u=Math.min(n.r,n.g,n.b),i=Math.max(n.r,n.g,n.b),r=i-u;return t.b=i,t.s=i!==0?255*r/i:0,t.h=t.s!==0?n.r===i?(n.g-n.b)/r:n.g===i?2+(n.b-n.r)/r:4+(n.r-n.g)/r:-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}function e(n){return n=parseInt(n.indexOf("#")>-1?n.substring(1):n,16),{r:n>>16,g:(n&65280)>>8,b:n&255}}n.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom",show:null,showSpeed:100,theme:"default",swatches:[]}};n.extend(n.fn,{minicolors:function(i,r){switch(i){case"destroy":return n(this).each(function(){v(n(this))}),n(this);case"hide":return s(),n(this);case"opacity":return r===undefined?n(this).attr("data-opacity"):(n(this).each(function(){o(n(this).attr("data-opacity",r))}),n(this));case"rgbObject":return nt(n(this),i==="rgbaObject");case"rgbString":case"rgbaString":return tt(n(this),i==="rgbaString");case"settings":return r===undefined?n(this).data("minicolors-settings"):(n(this).each(function(){var t=n(this).data("minicolors-settings")||{};v(n(this));n(this).minicolors(n.extend(!0,t,r))}),n(this));case"show":return c(n(this).eq(0)),n(this);case"value":return r===undefined?n(this).val():(n(this).each(function(){typeof r=="object"&&r!==null?(r.opacity!==undefined&&n(this).attr("data-opacity",t(r.opacity,0,1)),r.color&&n(this).val(r.color)):n(this).val(r);o(n(this))}),n(this));default:return i!=="create"&&(r=i),n(this).each(function(){g(n(this),r)}),n(this)}}});n([document]).on("mousedown.minicolors touchstart.minicolors",function(t){n(t.target).parents().add(t.target).hasClass("minicolors")||s()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(t){var i=n(this);t.preventDefault();n(t.delegateTarget).data("minicolors-target",i);y(i,t,!0)}).on("mousemove.minicolors touchmove.minicolors",function(t){var i=n(t.delegateTarget).data("minicolors-target");i&&y(i,t)}).on("mouseup.minicolors touchend.minicolors",function(){n(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(t){t.preventDefault();var i=n(this),r=i.parents(".minicolors").find(".minicolors-input"),u=i.data("swatch-color");w(r,u,k(u));o(r)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(t){var i=n(this).parent().find(".minicolors-input");t.preventDefault();c(i)}).on("focus.minicolors",".minicolors-input",function(){var t=n(this);t.data("minicolors-initialized")&&c(t)}).on("blur.minicolors",".minicolors-input",function(){var t=n(this),o=t.data("minicolors-settings"),v,c,i,l,s;t.data("minicolors-initialized")&&(v=o.keywords?n.map(o.keywords.split(","),function(t){return n.trim(t.toLowerCase())}):[],t.val()!==""&&n.inArray(t.val().toLowerCase(),v)>-1?s=t.val():(u(t.val())?i=r(t.val(),!0):(c=f(t.val(),!0),i=c?e(c):null),s=i===null?o.defaultValue:o.format==="rgb"?o.opacity?r("rgba("+i.r+","+i.g+","+i.b+","+t.attr("data-opacity")+")"):r("rgb("+i.r+","+i.g+","+i.b+")"):a(i)),l=o.opacity?t.attr("data-opacity"):1,s.toLowerCase()==="transparent"&&(l=0),t.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",l),t.val(s),t.val()===""&&t.val(b(o.defaultValue,!0)),t.val(h(t.val(),o.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(t){var i=n(this);if(i.data("minicolors-initialized"))switch(t.which){case 9:s();break;case 13:case 27:s();i.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var t=n(this);t.data("minicolors-initialized")&&o(t,!0)}).on("paste.minicolors",".minicolors-input",function(){var t=n(this);t.data("minicolors-initialized")&&setTimeout(function(){o(t,!0)},1)})});